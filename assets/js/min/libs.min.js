var geolocator=function(){"use strict";function i(a,c,d){function f(a,b){d&&e.parentNode&&e.parentNode.removeChild(e),"function"==typeof a&&a(b)}var e=document.createElement("script");e.async=!0,e.readyState?e.onreadystatechange=function(a){("loaded"===e.readyState||"complete"===e.readyState)&&(e.onreadystatechange=null,f(c))}:e.onload=function(a){f(c)},e.onerror=function(c){var d="Could not load source at "+String(a).replace(/\?.*$/,"");f(b,new Error(d))},e.src=a,document.getElementsByTagName("head")[0].appendChild(e)}function j(a){function b(){geolocator.__glcb&&delete geolocator.__glcb,google.load("maps",e,{other_params:"",callback:a})}void 0!==window.google&&void 0!==google.maps?a&&a():void 0!==window.google&&void 0!==google.loader?b():(geolocator.__glcb=b,i(d+"?callback=geolocator.__glcb"))}function k(a,b,c){var d,e,f,g=document.getElementById(a);g?(d=new google.maps.Map(g,b),e=new google.maps.Marker({position:b.center,map:d}),f=new google.maps.InfoWindow,f.setContent(c),google.maps.event.addListener(e,"click",function(){f.open(d,e)}),geolocator.location.map={canvas:g,map:d,options:b,marker:e,infoWindow:f}):geolocator.location.map=null}function l(a,b){function d(a,c){c===google.maps.GeocoderStatus.OK&&b&&b(a)}var c=new google.maps.Geocoder;c.geocode({latLng:a},d)}function m(a){if(a&&a.length>0){var b,c,d={},e=a[0].address_components;for(b=0;b<e.length;b+=1)c=e[b],c.types&&c.types.length>0&&(d[c.types[0]]=c.long_name,d[c.types[0]+"_s"]=c.short_name);geolocator.location.formattedAddress=a[0].formatted_address,geolocator.location.address={street:d.route||"",neighborhood:d.neighborhood||"",town:d.sublocality||"",city:d.locality||"",region:d.administrative_area_level_1||"",country:d.country||"",countryCode:d.country_s||"",postalCode:d.postal_code||"",streetNumber:d.street_number||""}}}function n(b){function e(b){m(b);var e=null===geolocator.location.ipGeoSource?14:7,f={zoom:e,center:d,mapTypeId:"roadmap"};k(c,f,b[0].formatted_address),a&&a.call(null,geolocator.location)}var d=new google.maps.LatLng(b.latitude,b.longitude);l(d,e)}function o(d,e){function f(e){var f=d===!0?0:"number"==typeof d?d:-1;f>=0?geolocator.locateByIP(a,b,f,c):b&&b(e)}function g(a){geolocator.location={ipGeoSource:null,coords:a.coords,timestamp:(new Date).getTime()},n(geolocator.location.coords)}function h(a){f(a)}geolocator.location=null,navigator.geolocation?navigator.geolocation.getCurrentPosition(g,h,e):f(new Error("geolocation is not supported."))}function p(a,b){switch(a){case 0:geolocator.location={coords:{latitude:b.latitude,longitude:b.longitude},address:{city:b.city,country:b.country_name,countryCode:b.country_code,region:b.region_name}};break;case 1:geolocator.location={coords:{latitude:b.geoplugin_latitude,longitude:b.geoplugin_longitude},address:{city:b.geoplugin_city,country:b.geoplugin_countryName,countryCode:b.geoplugin_countryCode,region:b.geoplugin_regionName}};break;case 2:geolocator.location={coords:{latitude:b.lat,longitude:b.lon},address:{city:b.city,country:"",countryCode:b.country,region:""}}}geolocator.location&&(geolocator.location.coords.accuracy=null,geolocator.location.coords.altitude=null,geolocator.location.coords.altitudeAccuracy=null,geolocator.location.coords.heading=null,geolocator.location.coords.speed=null,geolocator.location.timestamp=(new Date).getTime(),geolocator.location.ipGeoSource=f[a],geolocator.location.ipGeoSource.data=b)}function q(a){function d(){2===h?void 0!==window.Geo&&(p(h,window.Geo),delete window.Geo,c=!0):void 0!==a&&"string"!=typeof a&&(p(h,a),c=!0),c===!0?n(geolocator.location.coords):b&&b(new Error(a||"Could not get location."))}var c=!1;geolocator.location=null,delete geolocator.__ipscb,j(d)}function r(a){void 0===a.cbParam||null===a.cbParam||""===a.cbParam?i(a.url,q,!0):i(a.url+"?"+a.cbParam+"=geolocator.__ipscb",void 0,!0)}var a,b,c,h,d="https://www.google.com/jsapi",e="3.18",f=[{url:"//freegeoip.net/json/",cbParam:"callback"},{url:"//www.geoplugin.net/json.gp",cbParam:"jsoncallback"},{url:"//geoiplookup.wikimedia.org/",cbParam:""}],g=1;return{location:null,locate:function(d,e,f,g,h){function i(){o(f,g)}a=d,b=e,c=h,j(i)},locateByIP:function(d,e,i,j){h="number"!=typeof i||0>i||i>=f.length?g:i,a=d,b=e,c=j,geolocator.__ipscb=q,r(f[h])},isPositionError:function(a){return"[object PositionError]"===Object.prototype.toString.call(a)}}}();
!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";function d(a,b){var c=f();c.open("GET",a,!0),c.onreadystatechange=e(c,b),c.send()}function e(a,b){return function(){if(4===a.readyState&&200===a.status)try{b(null,JSON.parse(a.responseText))}catch(c){b(c,null)}}}function f(){return window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")}b.exports={load:d}},{}],2:[function(a,b,c){"use strict";b.exports=function d(a){function c(a){return a?void 0!==a.required&&a.required instanceof Array:!1}if(!c(a))throw new Error("-- OptionsValidator: required options missing");if(!(this instanceof d))return new d(a);var b=a.required;this.getRequiredOptions=function(){return b},this.validate=function(a){var c=[];return b.forEach(function(b){void 0===a[b]&&c.push(b)}),c}}},{}],3:[function(a,b,c){"use strict";function h(a){return k(a)?m(a):l(a)?n(a):void 0}function i(){return f.length=0,f}function j(){return f}function k(a){return!!a&&"[object Object]"===Object.prototype.toString.call(a)}function l(a){return!!a&&"[object Array]"===Object.prototype.toString.call(a)}function m(a){return f.push(a),f}function n(a){for(var b=[],c=0;c<a.length;c++)k(a[c])&&b.push(m(a[c]));return b}function o(a){return a?q(f,a,g.searchStrategy,g):[]}function p(a){g=a||{},g.fuzzy=a.fuzzy||!1,g.limit=a.limit||10,g.searchStrategy=a.fuzzy?d:e}function q(a,b,c,d){for(var e=[],f=0;f<a.length&&e.length<d.limit;f++){var g=r(a[f],b,c,d);g&&e.push(g)}return e}function r(a,b,c,d){for(var e in a)if(!s(a[e],d.exclude)&&c.matches(a[e],b))return a}function s(a,b){var c=!1;b=b||[];for(var d=0;d<b.length;d++){var e=b[d];!c&&new RegExp(a).test(e)&&(c=!0)}return c}b.exports={put:h,clear:i,get:j,search:o,setOptions:p};var d=a("./SearchStrategies/FuzzySearchStrategy"),e=a("./SearchStrategies/LiteralSearchStrategy"),f=[],g={};g.fuzzy=!1,g.limit=10,g.searchStrategy=g.fuzzy?d:e},{"./SearchStrategies/FuzzySearchStrategy":4,"./SearchStrategies/LiteralSearchStrategy":5}],4:[function(a,b,c){"use strict";function d(){this.matches=function(a,b){if("string"!=typeof a||"string"!=typeof b)return!1;var c=b.split("").reduce(function(a,b){return a+"[^"+b+"]*"+b});return c=new RegExp(c,"gi"),!!c.test(a)}}b.exports=new d},{}],5:[function(a,b,c){"use strict";function d(){this.matches=function(a,b){return"string"!=typeof a?!1:(a=a.trim(),a.toLowerCase().indexOf(b.toLowerCase())>=0)}}b.exports=new d},{}],6:[function(a,b,c){"use strict";function e(a){d.pattern=a.pattern||d.pattern,d.template=a.template||d.template,"function"==typeof a.middleware&&(d.middleware=a.middleware)}function f(a){return d.template.replace(d.pattern,function(b,c){var e=d.middleware(c,a[c],d.template);return void 0!==e?e:a[c]||b})}b.exports={compile:f,setOptions:e};var d={};d.pattern=/\{(.*?)\}/g,d.template="",d.middleware=function(){}},{}],7:[function(a,b,c){!function(b,c,d){"use strict";function l(a){h.put(a),p()}function m(a){i.load(a,function(b,c){b&&t("failed to get JSON ("+a+")"),l(c)})}function n(){e.resultsContainer.innerHTML=""}function o(a){e.resultsContainer.innerHTML+=a}function p(){e.searchInput.addEventListener("keyup",function(a){var b=a.which,c=a.target.value;s(b)&&r(c)&&(n(),q(h.search(c)))})}function q(a){if(0===a.length)return o(e.noResultsText);for(var b=0;b<a.length;b++)o(g.compile(a[b]))}function r(a){return a&&a.length>0}function s(a){return-1===[13,16,20,37,38,39,40,91].indexOf(a)}function t(a){throw new Error("SimpleJekyllSearch --- "+a)}var e={searchInput:null,resultsContainer:null,json:[],searchResultTemplate:'<li><a href="{url}" title="{desc}">{title}</a></li>',templateMiddleware:function(){},noResultsText:"No results found",limit:10,fuzzy:!1,exclude:[]},f=["searchInput","resultsContainer","json"],g=a("./Templater"),h=a("./Repository"),i=a("./JSONLoader"),j=a("./OptionsValidator")({required:f}),k=a("./utils");b.SimpleJekyllSearch=function(a){var b=j.validate(a);b.length>0&&t("You must specify the following required options: "+f),e=k.merge(e,a),g.setOptions({template:e.searchResultTemplate,middleware:e.templateMiddleware}),h.setOptions({fuzzy:e.fuzzy,limit:e.limit}),k.isJSON(e.json)?l(e.json):m(e.json)},b.SimpleJekyllSearch.init=b.SimpleJekyllSearch,"function"==typeof b.SimpleJekyllSearchInit&&b.SimpleJekyllSearchInit.call(this,b.SimpleJekyllSearch)}(window,document)},{"./JSONLoader":1,"./OptionsValidator":2,"./Repository":3,"./Templater":6,"./utils":8}],8:[function(a,b,c){"use strict";function d(a,b){var c={};for(var d in a)c[d]=a[d],void 0!==b[d]&&(c[d]=b[d]);return c}function e(a){try{return a instanceof Object&&JSON.parse(JSON.stringify(a))?!0:!1}catch(b){return!1}}b.exports={merge:d,isJSON:e}},{}]},{},[7]);
