'use strict';

/******/(function (modules) {
	// webpackBootstrap
	/******/ // The module cache
	/******/var installedModules = {};

	/******/ // The require function
	/******/function __webpack_require__(moduleId) {

		/******/ // Check if module is in cache
		/******/if (installedModules[moduleId])
			/******/return installedModules[moduleId].exports;

		/******/ // Create a new module (and put it into the cache)
		/******/var module = installedModules[moduleId] = {
			/******/exports: {},
			/******/id: moduleId,
			/******/loaded: false
			/******/ };

		/******/ // Execute the module function
		/******/modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

		/******/ // Flag the module as loaded
		/******/module.loaded = true;

		/******/ // Return the exports of the module
		/******/return module.exports;
		/******/
	}

	/******/ // expose the modules object (__webpack_modules__)
	/******/__webpack_require__.m = modules;

	/******/ // expose the module cache
	/******/__webpack_require__.c = installedModules;

	/******/ // __webpack_public_path__
	/******/__webpack_require__.p = "";

	/******/ // Load entry module and return exports
	/******/return __webpack_require__(0);
	/******/
})(
/************************************************************************/
/******/[
/* 0 */
/***/function (module, exports, __webpack_require__) {

	if (window.location.href === 'http://localhost:3000/' || window.location.href.indexOf('page') > -1 || window.location.href === 'https://artemgurzhii.github.io/conference/') {
		__webpack_require__(1);
		__webpack_require__(2);
		__webpack_require__(3);
	} else {
		if (window.location.href.indexOf('contact') > -1) {
			__webpack_require__(6);
		} else if (window.location.href.indexOf('about') > -1) {} else {
			__webpack_require__(8);
		}
	}

	__webpack_require__(9);

	/***/
},
/* 1 */
/***/function (module, exports, __webpack_require__) {
	var _this = this;

	var require;var require;(function e(t, n, r) {
		function s(o, u) {
			if (!n[o]) {
				if (!t[o]) {
					var a = typeof require === "function" && require;
					if (!u && a) {
						return require(o, !0);
					}
					if (i) {
						return i(o, !0);
					}
					throw new Error('Cannot find module \'' + o + '\'');
				}
				var f = n[o] = {
					exports: {}
				};
				t[o][0].call(f.exports, function (e) {
					var n = t[o][1][e];
					return s(n ? n : e);
				}, f, f.exports, e, t, n, r);
			}
			return n[o].exports;
		}
		var i = typeof require === "function" && require;
		var rLength = r.length;

		for (var o = 0; o < rLength; o += 1) {
			s(r[o]);
		}
		return s;
	})({
		1: [function (require, module, exports) {

			var XHR = function XHR(xhr, callback) {
				return function () {
					if (xhr.readyState === 4) {
						if (xhr.status === 200) {
							callback(null, JSON.parse(xhr.responseText));
						} else {
							callback(xhr.status + ': ' + xhr.statusText);
						}
					} else {
						return;
					}
				};
			};

			var load = function load(location, callback) {
				var request = new XMLHttpRequest();
				request.open('GET', location, true);
				request.send();
				request.onreadystatechange = XHR(request, callback);
			};

			module.exports = {
				load: load
			};
		}, {}],
		2: [function (require, module, exports) {

			module.exports = function OptsValidate(params) {

				var validateParams = function validateParams(params) {
					if (!params) {
						return false;
					}
					return params.required !== undefined && params.required instanceof Array;
				};

				if (!validateParams(params)) {
					throw new Error('Options Validator: required options missing');
				}
				if (!(this instanceof OptsValidate)) {
					return new OptsValidate(params);
				}

				var requiredOptions = params.required;

				this.getRequiredOptions = function () {
					return requiredOptions;
				};

				this.validate = function (param) {
					var errors = [];
					requiredOptions.forEach(function (requiredName) {
						if (param[requiredName] === undefined) {
							errors.push(requiredName);
						}
					});
					return errors;
				};
			};
		}, {}],
		3: [function (require, module, exports) {

			var fuzzySearch = require('./searchType/fuzzySearch');
			var literalSearch = require('./searchType/literalSearch');

			var data = [];
			var opt = {};
			opt.fuzzy = false;
			opt.limit = 10;
			opt.searchStrategy = opt.fuzzy ? fuzzySearch : literalSearch;

			var put = function put(data) {
				if (isObject(data)) {
					return addObject(data);
				}
				if (isArray(data)) {
					return addArray(data);
				}
				return undefined;
			};

			var clear = function clear() {
				data.length = 0;
				return data;
			};

			var get = function get() {
				return data;
			};

			var isObject = function isObject(obj) {
				return !!obj && Object.prototype.toString.call(obj) === '[object Object]';
			};

			var isArray = function isArray(obj) {
				return !!obj && Object.prototype.toString.call(obj) === '[object Array]';
			};

			var addObject = function addObject(_data) {
				data.push(_data);
				return data;
			};

			var addArray = function addArray(_data) {
				var added = [];
				var dataLength = _data.length;
				var i = void 0;
				for (i = 0; i < dataLength; i++) {
					if (isObject(_data[i])) {
						added.push(addObject(_data[i]));
					}
				}
				return added;
			};

			var search = function search(crit) {
				if (!crit) {
					return [];
				}
				return findMatches(data, crit, opt.searchStrategy, opt);
			};

			var setOptions = function setOptions() {
				var _opt = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];

				opt.fuzzy = _opt.fuzzy || false;
				opt.limit = _opt.limit || 10;
				opt.searchStrategy = _opt.fuzzy ? fuzzySearch : literalSearch;
			};

			var findMatches = function findMatches(data, crit, strategy, opt) {
				var matches = [];
				var i = void 0;
				var dataLength = data.length;
				var matchesLength = matches.length;
				for (i = 0; i < dataLength && matchesLength < opt.limit; i++) {
					var match = findMatchesInObject(data[i], crit, strategy, opt);
					if (match) {
						matches.push(match);
					}
				}
				return matches;
			};

			var findMatchesInObject = function findMatchesInObject(obj, crit, strategy, opt) {
				for (var key in obj) {
					if (obj.hasOwnProperty(key)) {
						if (!isExcluded(obj[key], opt.exclude) && strategy.matches(obj[key], crit)) {
							return obj;
						}
					}
				}
			};

			var isExcluded = function isExcluded(term) {
				var excludedTerms = arguments.length <= 1 || arguments[1] === undefined ? [] : arguments[1];

				var excluded = false;
				var excTermsLength = excludedTerms.length;
				var i = void 0;
				for (i = 0; i < excTermsLength; i++) {
					var excludedTerm = excludedTerms[i];
					if (!excluded && new RegExp(term).test(excludedTerm)) {
						excluded = true;
					}
				}
				return excluded;
			};

			module.exports = {
				put: put,
				clear: clear,
				get: get,
				search: search,
				setOptions: setOptions
			};
		}, {
			"./searchType/fuzzySearch": 4,
			"./searchType/literalSearch": 5
		}],
		4: [function (require, module, exports) {

			function fuzzySearch() {
				this.matches = function (string, crit) {
					if (typeof string !== 'string' || typeof crit !== 'string') {
						return false;
					}
					var fuzzy = crit.split("").reduce(function (a, b) {
						return a + '[^' + b + ']*' + b;
					});
					fuzzy = new RegExp(fuzzy, 'gi');
					return !!fuzzy.test(string);
				};
			}

			module.exports = new fuzzySearch();
		}, {}],
		5: [function (require, module, exports) {

			function literalSearch() {
				this.matches = function (string, crit) {
					if (typeof string !== 'string') {
						return false;
					}
					string = string.trim();
					return string.toLowerCase().indexOf(crit.toLowerCase()) >= 0;
				};
			}

			module.exports = new literalSearch();
		}, {}],
		6: [function (require, module, exports) {

			var options = {};
			options.pattern = /\{(.*?)\}/g;
			options.template = '';
			options.middleware = function () {};

			var setOptions = function setOptions(_options) {
				options.template = _options.template || options.template;
				if (typeof _options.middleware === 'function') {
					options.middleware = _options.middleware;
				}
			};

			var compile = function compile(data) {
				return options.template.replace(options.pattern, function (match, prop) {
					var value = options.middleware(prop, data[prop], options.template);
					if (value !== undefined) {
						return value;
					}
					return data[prop] || match;
				});
			};

			module.exports = {
				compile: compile,
				setOptions: setOptions
			};
		}, {}],
		7: [function (require, module, exports) {
			(function (window, document, undefined) {

				var options = {
					input: null,
					results: null,
					json: [],
					template: '<li><a href="{url}" title="{desc}">{title}</a></li>',
					templateMiddleware: function templateMiddleware() {},
					noResults: 'No results found',
					limit: 10,
					fuzzy: false,
					exclude: []
				};

				var requiredOptions = ['input', 'results', 'json'];
				var templater = require('./Template');
				var repository = require('./Repo');
				var jsonLoader = require('./JSONLoad');
				var optionsValidator = require('./OptsValidate')({
					required: requiredOptions
				});
				var utils = require('./utils');

				var initWithJSON = function initWithJSON(json) {
					repository.put(json);
					registerInput();
				};

				var initWithURL = function initWithURL(url) {
					jsonLoader.load(url, function (err, json) {
						if (err) {
							throwError('failed to get JSON (' + url + ')');
						}
						initWithJSON(json);
					});
				};

				window.jekyllSearch = function (_options) {
					var errors = optionsValidator.validate(_options);
					if (errors.length) {
						throwError('You must specify the following required options: ' + requiredOptions);
					}

					options = utils.merge(options, _options);

					templater.setOptions({
						template: options.template,
						middleware: options.templateMiddleware
					});

					repository.setOptions({
						fuzzy: options.fuzzy,
						limit: options.limit
					});

					if (utils.isJSON(options.json)) {
						initWithJSON(options.json);
					} else {
						initWithURL(options.json);
					}
				};

				// for backwards compatibility
				window.jekyllSearch.init = window.jekyllSearch;

				if (typeof window.SimpleJekyllSearchInit === 'function') {
					window.SimpleJekyllSearchInit.call(_this, window.jekyllSearch);
				}

				var emptyResultsContainer = function emptyResultsContainer() {
					options.results.innerHTML = '';
				};

				var appendToResultsContainer = function appendToResultsContainer(text) {
					options.results.innerHTML += text;
				};

				var render = function render(results) {
					var resLength = results.length;
					var i = void 0;
					if (resLength === 0) {
						return appendToResultsContainer(options.noResults);
					}
					for (i = 0; i < resLength; i++) {
						appendToResultsContainer(templater.compile(results[i]));
					}
				};

				var isValidQuery = function isValidQuery(query) {
					return query && query.length > 0;
				};

				var isWhitelistedKey = function isWhitelistedKey(key) {
					return [13, 16, 20, 37, 38, 39, 40, 91].indexOf(key) === -1;
				};

				function throwError(message) {
					throw new Error('Jekyll Search - ' + message);
				}

				function registerInput() {
					options.input.addEventListener('keyup', function (e) {
						var key = e.which;
						var query = e.target.value;
						if (isWhitelistedKey(key) && isValidQuery(query)) {
							emptyResultsContainer();
							render(repository.search(query));
						}
						if (options.input.value.length === 0) {
							emptyResultsContainer();
						}
					});
				}
			})(window, document);
		}, {
			"./JSONLoad": 1,
			"./OptsValidate": 2,
			"./Repo": 3,
			"./Template": 6,
			"./utils": 8
		}],
		8: [function (require, module, exports) {

			var merge = function merge(defaultParams, mergeParams) {
				var mergedOptions = {};
				for (var option in defaultParams) {
					if (defaultParams.hasOwnProperty(option)) {
						mergedOptions[option] = defaultParams[option];
						if (mergeParams[option] !== undefined) {
							mergedOptions[option] = mergeParams[option];
						}
					}
				}
				return mergedOptions;
			};

			var isJSON = function isJSON(json) {
				try {
					if (json instanceof Object && JSON.parse(JSON.stringify(json))) {
						return true;
					}
					return false;
				} catch (e) {
					return false;
				}
			};

			module.exports = {
				merge: merge,
				isJSON: isJSON
			};
		}, {}]
	}, {}, [7]);

	/***/
},
/* 2 */
/***/function (module, exports) {

	var jsonUrl = void 0;
	if (document.location.href.indexOf('page' > -1)) {
		jsonUrl = '../../data/search.json';
	} else {
		jsonUrl = 'data/search.json';
	}

	jekyllSearch({
		input: document.querySelector('.search-input'),
		results: document.querySelector('.search-results-list'),
		template: '<li><a href="{url}">{title} - {date}</a></li>',
		json: jsonUrl,
		noResults: '<li>No results found</li>',
		limit: 10,
		fuzzy: true
	});

	/***/
},
/* 3 */
/***/function (module, exports, __webpack_require__) {

	// importing functions
	var addEvent = __webpack_require__(4).addEvent;
	var removeChilds = __webpack_require__(5).removeChilds;

	// DOM Elements
	var _searchWrap = document.querySelector('.search-container');
	var _searchInput = _searchWrap.querySelector('.search-input');
	var _searchIcon = _searchWrap.querySelector('.clear-search-input');
	var _searchList = _searchWrap.querySelector('.search-results-list');

	// defining remove_searchList function
	var remove_searchList = function remove_searchList() {
		removeChilds(_searchList, _searchInput);
	};

	// adding eventlistener on close icon click
	addEvent(_searchIcon, 'click', remove_searchList);

	// exporting function
	module.exports = {
		removeChilds: removeChilds
	};

	/***/
},
/* 4 */
/***/function (module, exports) {

	// arguments - node element, event to trigger and function to execute
	// addEvent function
	var addEvent = function addEvent(elem, type, func) {
		if (elem.addEventListener) {
			elem.addEventListener(type, func, false);
		} else {
			elem.attachEvent('on' + type, func);
		}
	};

	// defining removeEvent function
	var removeEvent = function removeEvent(elem, type, func) {
		if (elem.removeEventListener) {
			elem.removeEventListener(type, func, false);
		} else {
			elem.detachEvent('on' + type, func);
		}
	};

	// exporting functions
	module.exports = {
		addEvent: addEvent,
		removeEvent: removeEvent
	};

	/***/
},
/* 5 */
/***/function (module, exports) {

	// defining removeChilds function
	// this function will remove all childrens from element and clear input value if needed
	var removeChilds = function removeChilds(removeElem, clearVal) {
		while (removeElem.firstElementChild) {
			removeElem.removeChild(removeElem.firstElementChild);
		}
		if (clearVal) {
			clearVal.value = '';
		}
	};

	// exporting function
	module.exports = {
		removeChilds: removeChilds
	};

	/***/
},
/* 6 */
/***/function (module, exports, __webpack_require__) {

	// importing functions
	var addClass = __webpack_require__(7).addClass;
	var hasClass = __webpack_require__(7).hasClass;
	var removeClass = __webpack_require__(7).removeClass;
	var addEvent = __webpack_require__(4).addEvent;

	// DOM Elements
	var _form = document.querySelector('.feedback-contact');
	var _submitBtn = _form.querySelector('.submit-feedback');
	var _name = _form.querySelector('input[type="text"]');
	var _email = _form.querySelector('input[type="email"]');

	// defining validateForm function
	// this function will addClass Valid if input value passed test, and Invalid class if didn't
	var validateForm = function validateForm(e, filter, inputField, invalidText, validClass, invalidClass) {
		var testing = filter.test(inputField.value);
		var _para = document.createElement('p');

		if (inputField.value.length) {
			if (!testing) {
				if (typeof e.preventDefault === 'function') {
					e.preventDefault();
				} else {
					e.returnValue = false;
				}

				if (hasClass(inputField, validClass)) {
					removeClass(inputField, validClass);
				}
				if (!hasClass(inputField, invalidClass)) {
					addClass(inputField, invalidClass);
					_para.textContent = invalidText;
					inputField.parentNode.insertBefore(_para, inputField.nextElementSibling);
				}
			} else {
				if (inputField.parentNode.children.length === 3) {
					inputField.parentNode.removeChild(inputField.parentNode.lastElementChild);
					removeClass(inputField, 'invalid-input-value');
				}
				addClass(inputField, validClass);
			}
		}
	};

	// name validation function
	var validateName = function validateName() {
		var validateNameFilter = /^[a-zA-Z а-яА-Я ]{4,30}$/;
		validateForm(event, validateNameFilter, _name, 'Invalid name', 'valid-input-value', 'invalid-input-value');
	};

	// email validation function
	var validateEmail = function validateEmail() {
		var validateEmailFilter = /^(([^<>+()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
		validateForm(event, validateEmailFilter, _email, 'Invalid email', 'valid-input-value', 'invalid-input-value');
	};

	// adding eventlisteners on submit-button-click
	addEvent(_submitBtn, 'click', validateName);
	addEvent(_submitBtn, 'click', validateEmail);

	/***/
},
/* 7 */
/***/function (module, exports) {

	// arguments - node element and className to remove,add and check if has
	// defining hasClass function
	var hasClass = function hasClass(elem, className) {
		if (elem.classList) {
			return elem.classList.contains(className);
		} else {
			return !!elem.className.match(new RegExp('(\\s|^)' + className + '(\\s|$)'));
		}
	};

	// defining addClass function
	var addClass = function addClass(elem, className) {
		if (elem.classList && !hasClass(elem, className)) {
			elem.classList.add(className);
		} else if (!hasClass(elem, className)) {
			elem.className += ' ' + className;
		}
	};

	// defining removeClass function
	var removeClass = function removeClass(elem, className) {
		if (elem.classList && hasClass(elem, className)) {
			elem.classList.remove(className);
		} else if (hasClass(elem, className)) {
			var reg = /(\s|^)${className}(\s|$)/;
			elem.className = elem.className.replace(reg, ' ');
		}
	};

	// exporting functions
	module.exports = {
		addClass: addClass,
		hasClass: hasClass,
		removeClass: removeClass
	};

	/***/
},
/* 8 */
/***/function (module, exports) {

	// DOM Elements
	var _store = document.querySelector('.post-main-page');
	var _txt = _store.querySelectorAll('.text-count');
	var _charCount = _store.querySelector('.chars-length');
	var _readTime = _store.querySelector('.read-time');

	// iterations
	var i = void 0;
	var newTxtString = void 0;
	var len = _txt.length;
	for (i = 0; i < len; i++) {
		newTxtString += _txt[i].textContent;
	}

	// Math operations with time to get time in minutes and seconds
	var seconds = Math.floor(newTxtString.match(/\b[-?(\w+)?]+\b/gi).length * 60 / 275);
	var minutes = Math.floor(seconds / 60);

	// removing spaces from string and setting number of characters in string to new string length
	_charCount.textContent = newTxtString.replace(/ /gi, '').length;

	// display seconds/minutes and seconds if needed
	if (seconds > 60) {
		seconds = seconds - minutes * 60;
		_readTime.textContent = minutes + 'm ' + seconds + 's';
	} else {
		_readTime.textContent = seconds + 's';
	}

	/***/
},
/* 9 */
/***/function (module, exports) {

	// defining XHR(request) function
	var XHR = function XHR(url) {
		return new Promise(function (resolve, reject) {
			var request = new XMLHttpRequest();
			request.open('GET', url, true);
			request.send();
			request.addEventListener('readystatechange', function () {
				if (request.status === 200) {
					if (request.readyState === 4) {
						resolve(JSON.parse(request.response));
					}
				} else {
					reject('XMLHttpRequest rejected with status ' + request.status + ': ' + request.statusText);
				}
			}, false);
		});
	};

	// exporting function
	module.exports = {
		XHR: XHR
	};

	// Usage
	// XHR('http://localhost:3000/data/search.json')
	//   .then(result => console.log(JSON.stringify(result, null, 2)))
	//   .catch(error => new Error(error));

	/***/
}
/******/]);